# 380. Insert Delete GetRandom O(1) (LeetCode)

ğŸ”— ë¬¸ì œ ë§í¬ â†’ [LeetCode 380. Insert Delete GetRandom O(1)](https://leetcode.com/problems/insert-delete-getrandom-o1)

## ë¬¸ì œ ì„¤ëª…

ì›ì†Œì˜ ì‚½ì…, ì‚­ì œ, ëœë¤ ì ‘ê·¼ì„ ëª¨ë‘ í‰ê·  O(1) ì‹œê°„ ë³µì¡ë„ë¡œ ìˆ˜í–‰í•˜ëŠ” ìë£Œêµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ë‹¤ìŒ ì—°ì‚°ë“¤ì„ ì§€ì›í•´ì•¼ í•©ë‹ˆë‹¤:

- `insert(val)` : ê°’ `val`ì„ ì§‘í•©ì— ì‚½ì…í•©ë‹ˆë‹¤. ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´ `false`, ìƒˆë¡œ ì‚½ì…ë˜ì—ˆë‹¤ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `remove(val)` : ê°’ `val`ì„ ì§‘í•©ì—ì„œ ì œê±°í•©ë‹ˆë‹¤. ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ `false`, ì œê±°ë˜ì—ˆë‹¤ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `getRandom()` : í˜„ì¬ ì§‘í•©ì— ìˆëŠ” ì›ì†Œë“¤ ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ëª¨ë“  ì›ì†Œê°€ ë™ì¼í•œ í™•ë¥ ë¡œ ì„ íƒë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

## ğŸ’¡ ë¬¸ì œ í•´ê²° ì „ëµ

- ë°°ì—´(`number[]`)ê³¼ í•´ì‹œë§µ(`Map<number, number>`)ì„ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì‚½ì…/ì‚­ì œ/ëœë¤ ì ‘ê·¼ì„ ëª¨ë‘ O(1)ì— ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ì‚½ì… ì‹œ: ë°°ì—´ ëì— ì¶”ê°€í•˜ê³ , ë§µì—ëŠ” í•´ë‹¹ ê°’ì˜ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
- ì‚­ì œ ì‹œ: ì‚­ì œí•  ê°’ì„ ë°°ì—´ì˜ ë§ˆì§€ë§‰ ê°’ê³¼ êµí™˜í•˜ê³ , ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ì œê±°í•©ë‹ˆë‹¤. ë§µì—ì„œë„ ì¸ë±ìŠ¤ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.
- ëœë¤ ì ‘ê·¼ ì‹œ: ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•´ í•´ë‹¹ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

## âœ… ê°œì„ ëœ TypeScript í’€ì´

```ts
class RandomizedSet {
  private map: Map<number, number>
  private list: number[]

  constructor() {
    this.map = new Map()
    this.list = []
  }

  insert(val: number): boolean {
    if (this.map.has(val)) return false
    this.map.set(val, this.list.length)
    this.list.push(val)
    return true
  }

  remove(val: number): boolean {
    if (!this.map.has(val)) return false

    const index = this.map.get(val)!
    const last = this.list[this.list.length - 1]

    this.list[index] = last
    this.map.set(last, index)

    this.list.pop()
    this.map.delete(val)

    return true
  }

  getRandom(): number {
    const randomIdx = Math.floor(Math.random() * this.list.length)
    return this.list[randomIdx]
  }
}
```

## ğŸ” ì´ˆê¸° í’€ì´ vs ê°œì„  í’€ì´ ë¹„êµ

### ğŸ”¸ ì´ˆê¸° í’€ì´ (Set ê¸°ë°˜)

```ts
class RandomizedSet {
  mmr: Set<number>

  constructor() {
    this.mmr = new Set()
  }

  insert(val: number): boolean {
    if (this.mmr.has(val)) return false
    this.mmr.add(val)
    return true
  }

  remove(val: number): boolean {
    if (!this.mmr.has(val)) return false
    this.mmr.delete(val)
    return true
  }

  getRandom(): number {
    const randomIdx = Math.floor(Math.random() * this.mmr.size)
    return Array.from(this.mmr)[randomIdx]
  }
}
```

### âœ… ê°œì„  í’€ì´ (Map + ë°°ì—´ ê¸°ë°˜)

- `insert`ì™€ `remove`ëŠ” ë™ì¼í•œ O(1)ì´ì§€ë§Œ, `getRandom`ì˜ ì„±ëŠ¥ì—ì„œ í° ì°¨ì´ ë°œìƒ
- `Set` ê¸°ë°˜ `getRandom()`ì€ `Array.from(set)` ë³€í™˜ì— O(n) ì†Œìš”
- `Map + ë°°ì—´` ê¸°ë°˜ì€ ì¸ë±ìŠ¤ë¥¼ í†µí•œ ì ‘ê·¼ìœ¼ë¡œ O(1)ì— ëœë¤ ì ‘ê·¼ ê°€ëŠ¥

## ğŸ› ï¸ ì½”ë“œ ë™ì‘ ì›ë¦¬

1. **insert(val)**

   - ì´ë¯¸ ì¡´ì¬í•˜ë©´ `false` ë°˜í™˜
   - ë°°ì—´ ëì— `val` ì¶”ê°€, ë§µì— í•´ë‹¹ ì¸ë±ìŠ¤ë¥¼ ê¸°ë¡

2. **remove(val)**

   - ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ `false` ë°˜í™˜
   - ì‚­ì œ ëŒ€ìƒê³¼ ë°°ì—´ì˜ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ êµì²´í•œ í›„ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ ì œê±°
   - ë§µì—ì„œ ì¸ë±ìŠ¤ ì •ë³´ ê°±ì‹  ë° ì‚­ì œ

3. **getRandom()**
   - ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ë¬´ì‘ìœ„ë¡œ ê³¨ë¼ì„œ í•´ë‹¹ ê°’ ë°˜í™˜

## ğŸ“Š ì‹œê°„ ë³µì¡ë„ & ê³µê°„ ë³µì¡ë„

| ì—°ì‚°      | Set ê¸°ë°˜ í’€ì´ | Map + ë°°ì—´ ê¸°ë°˜ í’€ì´ |
| --------- | ------------- | -------------------- |
| insert    | O(1)          | O(1)                 |
| remove    | O(1)          | O(1)                 |
| getRandom | âŒ O(n)       | âœ… O(1)              |

## ğŸš€ ê²°ë¡  ë° íš¨ìœ¨ì„± ë¹„êµ

- ê¸°ì¡´ `Set` ê¸°ë°˜ í’€ì´ëŠ” êµ¬ì¡°ëŠ” ê°„ë‹¨í•˜ì§€ë§Œ `getRandom()`ì—ì„œ ì„±ëŠ¥ ì €í•˜
- ê°œì„ ëœ `Map + ë°°ì—´` ê¸°ë°˜ í’€ì´ëŠ” ì§„ì •í•œ ì˜ë¯¸ì˜ O(1) ëœë¤ ì ‘ê·¼ ê°€ëŠ¥
- LeetCode ë¬¸ì œì˜ ìš”êµ¬ ì¡°ê±´ì„ ë§Œì¡±í•˜ë ¤ë©´ **ê°œì„ ëœ ë°©ì‹**ì´ í•„ìˆ˜ì ì„

## ğŸ“ ìš”ì  ì •ë¦¬

- ë°°ì—´ê³¼ í•´ì‹œë§µì„ ì¡°í•©í•˜ì—¬ ì‚½ì…, ì‚­ì œ, ëœë¤ ì ‘ê·¼ì„ O(1)ì— ì²˜ë¦¬ ê°€ëŠ¥
- ì‚­ì œ ì‹œ ë§ˆì§€ë§‰ ìš”ì†Œì™€ì˜ ìŠ¤ì™‘ì„ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ ì œê±°
- `getRandom()`ì€ ë°°ì—´ ì¸ë±ìŠ¤ë¥¼ í†µí•œ ì§ì ‘ ì ‘ê·¼ìœ¼ë¡œ O(1) ë³´ì¥
- ë¬¸ì œì˜ ìš”êµ¬ ì¡°ê±´ì„ ì™„ì „íˆ ë§Œì¡±í•˜ëŠ” ìµœì  í’€ì´
